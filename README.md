# lit_notebooks

Литературные ноутбуки (навеяно Дональдом Кнутом - Literate Programming)

## Очень краткое описание

Если очень кратко, то развил и отчасти модифицировал идею Дональда (см., например, здесь - http://www.literateprogramming.com/knuthweb.pdf):

* код один раз пишем и потом многократно читаем, поэтому его должно быть возможно читать легко
* код - это один из видов документации на ПО (зачастую - единственная документация)
* если использовать python, то один из вариантов оформления/использования кода - юпитер ноутбуки (Jupyter Notebooks)
* литературный ноутбук - это ноутбук, оформленный немного специальным образом
* именно он создается "руками" и является "артефактом" (исходником)
    * из него "генерируется" модуль, содержащий код
    * из него "генерируется" файл юнит-тестов

Более подробные описания содержатся в самих ноутбуках (на то они и "литературные"), а также в примерах.

## Зависимости

* jinja2
* тестировал на питоне 3.11
  
## Структура репозитория

### Src: исходники

Основные исходники

* `asm.py`: модуль ассемблера
* `test_asm.py`: тесты для модуля ассемблера
* `lit_asm.ipynb`: ассемблерный ноутбук с литературными функциями и дополнительными описаниями

### Examples: основные примеры

Как минимум набор из 

* `asm_smoke_asm.ipynb`: хэппи-путь и примеры для ассемблера (используется как источник для сложных тестов в test_asm.py)
* `lit_smoke.ipynb`: хэпии-путь и примеры для лит-компилятора (используется как источник для сложных тестов внутри сгенеренного из lit.ipynb тестового test_lit.py)

### Modules: сгенерированные модули

"Установочный" комплект

* `asm.py`: модуль ассемблера (копия из директории Src)
* `lit.py`: модуль лит-компилятора

Эти модули нужно скопировать на `sys.path()`.

Модуль `lit.py` (лит-компилятор) получен из ноутбука `lit_asm.ipynb` (см. механику использования модулей ниже), поэтому он не содержит комментариев и не является "исходником".

## Быстрый старт

### Установка

Скопируйте модули `asm.py` и `lit.py` на `sys.path()`

### Использование

Чтобы получить модуль `lit_smoke.py` из примера литературного ноутбука `lit_smoke.ipynb` (см. директорию Examples), необходимо выполнить


    lit.genAsmNotebook("lit_smoke.ipynb") # порождает ноутбук lit_smoke_asm.ipynb 
    asm.processFile("lit_smoke_asm.ipynb") # порождает модуль lit_smoke.py

Чтобы прогнать юнит-тесты, содержащиеся в примере литературного ноутбука `lit_smoke.ipynb` (см. директорию Examples), необходимо дополнительно выполнить

    asm.processFile("lit_smoke_asm.ipynb","test") # порождает тест сьют test_lit_smoke.py
    !pytest test_lit_smoke.py # выполняем тесты

